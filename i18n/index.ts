import { getLocales } from "expo-localization";
import { I18n } from "i18n-js/src";

const i18n = new I18n({
  en: {
    exploreSubtitle: "Discover",
    exploreTitle: "Explore Zimbabwe's Flavors",
    appTitle: "ZimBites",
    popular: "Popular Recipes",
    searchPlaceholder: "Search recipes, ingredients...",
    trending: "Trending this week",
    seeAll: "See All",
    categories: "Categories",
    popularRecipes: "Popular Recipes",
    results: "Results",
    grains: "Grains",
    relishes: "Relishes",
    meats: "Meats",
    drinks: "Drinks",
    quickMeals: "Quick Meals",
    vegetarian: "Vegetarian",
    ceremonial: "Ceremonial",
    all: "All",
    healthy: "HEALTHY",
    trendingTag: "TRENDING",
    createRecipe: "Create Recipe",
    aiGenerate: "Generate with AI",
    scanIngredients: "Scan Ingredients",
    savedRecipes: "Saved Recipes",
    searchSaved: "Search saved recipes",
    noSavedRecipes: "No saved recipes yet",
    saveRecipesMessage: "Save recipes you love to cook here!",
    browseRecipes: "Browse Recipes",
    shoppingList: "Shopping List",
    addItem: "Add item...",
    completed: "Completed",
    undo: "Undo",
    clear: "Clear",
    clearListConfirm: "Are you sure you want to clear your shopping list?",
    cancel: "Cancel",
    emptyList: "Your list is empty",
    emptyListMessage:
      "Add ingredients from recipes to help you shop for your next meal.",
    pantryCheck: "What's in your kitchen?",
    pantrySubtitle:
      "Select ingredients you have, and we'll suggest recipes you can cook right now.",
    skip: "Skip for now",
    showRecipes: "Show Recipes",
    profile: "Profile",
    level: "Level",
    saved: "Saved",
    rank: "Rank",
    badges: "Badges",
    achievements: "Achievements",
    viewAll: "View All",
    ingredients: "Ingredients",
    steps: "Steps",
    addToShoppingList: "Add to Shopping List",
    startCooking: "Start Cooking",
    servings: "Servings",
    time: "Time",
    reviews: "Reviews",
    calories: "Calories",
    greeting: "Hello",
    subGreeting: "What are we cooking today?",
    featured: "Featured Traditional Dishes",
    recipeOfTheDay: "Recipe of the Day",
    searchPlaceholderHome: "Search for Sadza, Mopane worms...",
    onboardingTitle: "Tell us about you",
    onboardingSubtitle: "We'll personalize your recipe recommendations.",
    chefAvatar: "Chef Avatar",
    uploadPhoto: "Upload Photo",
    nameLabel: "What should we call you?",
    namePlaceholder: "Enter your name",
    experienceLabel: "Cooking Experience",
    dietaryLabel: "Dietary Preferences",
    continue: "Continue",
    beginner: "Beginner",
    homeCook: "Home Cook",
    pro: "Pro",
    vegetarian: "Vegetarian",
    vegan: "Vegan",
    glutenFree: "Gluten-Free",
    halal: "Halal",
    none: "None",
    settingsTitle: "Settings",
    appPreferences: "App Preferences",
    darkMode: "Dark Mode",
    notifications: "Push Notifications",
    content: "Content",
    language: "Language",
    offlineData: "Offline Data",
    about: "About",
    version: "Version",
    terms: "Terms of Service",
    privacy: "Privacy Policy",
    deleteAccount: "Delete Account",
    logOut: "Log Out",
    items: "items",
    permissionNeeded: "Permission needed",
    cameraPermission: "Camera permission is required to scan ingredients.",
    recipeSaved: "Recipe saved to your collection!",
    analyzing: "Analyzing ingredients & creating recipe...",
    poweredBy: "Powered by Gemini AI",
    saveRecipe: "Save Recipe",
    recipeNotFound: "Recipe not found",
    createTitle: "Share Your Recipe",
    createSubtitle: "Join the community of Zimbabwean chefs",
    slogan: "Zvinonaka zveChinyakare, Mukicheni Yemazuva Ano",
    addPhoto: "Add Cover Photo",
    recipeTitle: "Recipe Title",
    recipeTitlePlaceholder: "e.g. Grandma's Sadza",
    prepTime: "Prep Time",
    prepTimePlaceholder: "e.g. 30 mins",
    servings: "Servings",
    servingsPlaceholder: "e.g. 4 people",
    description: "Description",
    descriptionPlaceholder: "Tell us about your dish...",
    publish: "Publish Recipe",
    publishing: "Publishing...",
    missingInfo: "Missing Info",
    missingInfoDesc: "Please provide at least a title and description.",
    success: "Success",
    recipeCreated: "Your recipe has been created and synced!",
    error: "Error",
    createError:
      "Failed to create recipe. Please ensure Supabase is configured.",
    ingredientsPlaceholder: "One per line (e.g. 2 cups flour)",
    stepsPlaceholder: "One per line (e.g. Mix ingredients)",
    mealieMeal: "Mealie Meal",
    beef: "Beef",
    chicken: "Chicken",
    tomatoes: "Tomatoes",
    onions: "Onions",
    greens: "Greens (Covo/Rape)",
    peanutButter: "Peanut Butter",
    kapenta: "Kapenta",
    beans: "Beans",
    oil: "Cooking Oil",
    salt: "Salt",
    garlic: "Garlic",
    home: "Home",
    explore: "Explore",
    sortBy: "Sort By",
    cookingMode: "Cooking Mode",
    step: "Step",
    of: "of",
    mins: "mins",
    goBack: "Go Back",
    chefsTip: "Chef's Tip",
    finishCooking: "Finish Cooking",
    nextStep: "Next Step",
    personalInfo: "Personal Information",
    helpCenter: "Help Center",
    rateUs: "Rate Us",
    refreshed: "Refreshed",
    removePhoto: "Remove Photo",
    imageUploadHint: "Tap to upload (Images will be compressed)",
    addIngredient: "Add Ingredient",
    addStep: "Add Step",
    validationError: "Validation Error",
    checkFields: "Please check the fields marked in red",
    imagePickerError: "Failed to pick image",
    favorite: "Favorite",
    share: "Share",
    addedTo: "Added to",
    favorites: "Favorites",
    removed: "Removed",
    removedFrom: "Removed from",
    required: "Required",
    invalidNumber: "Invalid number",
    atLeastOneIngredient: "Add at least one ingredient",
    atLeastOneStep: "Add at least one step",
    notificationSettings: "Notification Settings",
    notificationSettingsDesc: "Manage which notifications you want to receive.",
    dailyReminder: "Daily Reminder",
    dailyReminderDesc: "Get reminded to cook something new every day.",
    weeklyLeaderboard: "Weekly Leaderboard",
    weeklyLeaderboardDesc: "Updates on the weekly chef leaderboard.",
    newBadges: "New Badges",
    newBadgesDesc: "Get notified when you unlock a new badge.",
    newRecipes: "New Recipes",
    newRecipesDesc: "When new recipes are added to the community.",
    savedLocally: "Saved locally",
    syncLater: "Changes will sync when online.",
    emptyShoppingList: "Your shopping list is empty",
    emptyShoppingListDesc:
      "Add ingredients from recipes or manually add items above.",
    editProfile: "Edit Profile",
    changePhoto: "Change Profile Photo",
    bioLabel: "Bio",
    bioPlaceholder: "Write a short bio...",
    save: "Save",
    fullName: "Full Name",
  },
  sn: {
    exploreTitle: "Tsvaga Zvinonaka zveZimbabwe",
    exploreSubtitle: "Tsvaga",
    searchPlaceholder: "Tsvaga mabikirwo, zvinoshandiswa...",
    trending: "Zvirikutaurwa svondo rino",
    seeAll: "Ona Zvese",
    categories: "Mhando",
    popularRecipes: "Mabikirwo Akakurumbira",
    results: "Zvakawanikwa",
    grains: "Zviyo",
    relishes: "Muriwo",
    meats: "Nyama",
    drinks: "Zvinwiwa",
    quickMeals: "Chikafu Chekukasira",
    vegetarian: "Zvemuriwo",
    ceremonial: "Zvemitambo",
    all: "Zvese",
    healthy: "ZVINOVAKA",
    trendingTag: "ZVIRIKUPISA",
    createRecipe: "Gadzira Resipi",
    aiGenerate: "Gadzira ne AI",
    scanIngredients: "Tora Mufananidzo Wezvinoshandiswa",
    savedRecipes: "Mabikirwo Akachengetwa",
    noSavedRecipes: "Hapana mabikirwo akachengetwa",
    saveRecipesMessage: "Chengeta mabikirwo aunofarira pano!",
    browseRecipes: "Tsvaga Mabikirwo",
    shoppingList: "Zvekutenga",
    clear: "Bvisa Zvese",
    clearListConfirm: "Une chokwadi here kuti unoda kubvisa zvese?",
    cancel: "Kanzura",
    emptyList: "Hapana zvekutenga",
    emptyListMessage: "Isa zvinoshandiswa kubva kumabikirwo kuti utenge.",
    pantryCheck: "Chii chirimo mukitchen?",
    pantrySubtitle: "Sarudza zvaunazvo, tikupe mabikirwo anoenderana nazvo.",
    skip: "Svetuka parizvino",
    showRecipes: "Ona Mabikirwo",
    profile: "Profile",
    level: "Level",
    saved: "Zvakachengetwa",
    rank: "Chinzvimbo",
    badges: "Mabheji",
    achievements: "Zvakaitwa",
    viewAll: "Ona Zvese",
    ingredients: "Zvinoshandiswa",
    steps: "Matanho",
    addToShoppingList: "Isa pane Zvekutenga",
    startCooking: "Tanga Kubika",
    servings: "Vanhu",
    time: "Nguva",
    reviews: "Maonero",
    calories: "Simba",
    greeting: "Mhoro",
    subGreeting: "Tiri kubika chii nhasi?",
    featured: "Mabikirwo Echivanhu Akasarudzwa",
    recipeOfTheDay: "Resipi Yanhasi",
    searchPlaceholderHome: "Tsvaga Sadza, Madora...",
    onboardingTitle: "Tiudze nezvako",
    onboardingSubtitle: "Tichagadzirisa mabikirwo anoenderana newe.",
    nameLabel: "Unonzi ani?",
    namePlaceholder: "Nyora zita rako",
    experienceLabel: "Ruzivo rwekubika",
    dietaryLabel: "Zvaunofarira kudya",
    continue: "Enderera",
    beginner: "Mudzidzi",
    homeCook: "Mubiki wePamba",
    pro: "Nyanzvi",
    vegan: "Vegan",
    glutenFree: "Hapana Gorosi",
    halal: "Halal",
    none: "Hapana",
    settingsTitle: "Zvirongwa",
    appPreferences: "Zvaunofarira",
    darkMode: "Modhi Yerima",
    notifications: "Zviziviso",
    content: "Zvirimo",
    language: "Mutauro",
    offlineData: "Data reOffline",
    about: "Nezvedu",
    version: "Vhezheni",
    terms: "Mitemo Yekushandisa",
    privacy: "Polisi Yekuchengetedza",
    deleteAccount: "Dzima Akaunti",
    personalInfo: "Mashoko Ako",
    helpCenter: "Rubatsiro",
    rateUs: "Tipe Maonero",
    logOut: "Buda",
    recipeNotFound: "Resipi haisi kuwanikwa",
    addedTo: "zvaiswa ku",
    createTitle: "Govera Resipi Yako",
    nextStep: "Danho Rinotevera",
    addPhoto: "Isa Mufananidzo",
    recipeTitle: "Zita reResipi",
    recipeTitlePlaceholder: "sge. Sadza raGogo",
    prepTime: "Nguva yekugadzirira",
    prepTimePlaceholder: "sge. Maminitsi 30",
    servingsPlaceholder: "sge. Vanhu 4",
    description: "Tsanangudzo",
    descriptionPlaceholder: "Tiudze nezvechikafu chako...",
    publish: "Buritsa Resipi",
    publishing: "Kushambadza...",
    missingInfo: "Mashoko Asipo",
    missingInfoDesc: "Ndapota isa zita netsanangudzo.",
    success: "Zwaitwa",
    recipeCreated: "Resipi yako yagadzirwa!",
    error: "Kukanganisa",
    createError: "Kutadza kugadzira resipi.",
    removePhoto: "Bvisa Mufananidzo",
    imageUploadHint: "Baya kuti uise mufananidzo",
    addIngredient: "Wedzera Zvinoshandiswa",
    addStep: "Wedzera Danho",
    validationError: "Kukanganisa",
    checkFields: "Tarisa pane zvakanyorwa nemutsvuku",
    imagePickerError: "Kutadza kutora mufananidzo",
    required: "Zvinodiwa",
    invalidNumber: "Nhamba haisiiyo",
    atLeastOneIngredient: "Isa chinhu chimwe chete",
    atLeastOneStep: "Isa danho rimwe chete",
    firstCook: "Mubiki Mutsva",
    weekStreak: "Vhiki Yakatevedzana",
    spiceMaster: "Nyanzvi yeZvinonhuwira",
    earlyBird: "Muka Mangwanani",
    proChef: "Mubiki Mukuru",
    createSubtitle: "Join the community of Zimbabwean chefs",
    slogan: "Zvinonaka zveChinyakare, Mukicheni Yemazuva Ano",
    ingredientsPlaceholder: "Nyora zvinoshandiswa (mutsara mumwe pachimwe)",
    stepsPlaceholder: "Nyora matanho (mutsara mumwe pachimwe)",
    permissionNeeded: "Mvumo Inodiwa",
    cameraPermission:
      "Mvumo yekamera inodiwa kuti utore mifananidzo yezvinoshandiswa.",
    cameraError: "Pane chakanganisika pakuvhura kamera.",
    generateError: "Tatadza kugadzira resipi. Edza zvakare.",
    failedToSave: "Tatadza kuchengeta resipi.",
    savedSuccess: "Resipi yachengetwa!",
    mealieMeal: "Upfu",
    beef: "Nyama yemombe",
    chicken: "Huku",
    tomatoes: "Madomasi",
    onions: "Hanyanisi",
    greens: "Muriwo",
    peanutButter: "Dovi",
    kapenta: "Matemba",
    beans: "Bhinzi",
    oil: "Mafuta",
    salt: "Munyu",
    garlic: "Garlic",
    home: "Kumba",
    explore: "Tsvaga",
    sortBy: "Ronga ne",
    cookingMode: "Kubika",
    step: "Danho",
    of: "re",
    mins: "maminitsi",
    goBack: "Dzokera",
    chefsTip: "Mazano aShefu",
    finishCooking: "Pedza Kubika",
    nextStep: "Danho Rinotevera",
  },
  nd: {
    exploreTitle: "Hlola Nambitha zeZimbabwe",
    exploreSubtitle: "Hlola",
    searchPlaceholder: "Dingisisa amaresiphi...",
    trending: "Okutrendayo iviki leli",
    seeAll: "Bona Konke",
    categories: "Imikhakha",
    popularRecipes: "Amaresiphi Adumileyo",
    results: "Imiphumela",
    grains: "Izinhlamvu",
    relishes: "Imibhida",
    meats: "Inyama",
    drinks: "Iziphuzo",
    quickMeals: "Ukudla Kokushesha",
    vegetarian: "Okwemibhida",
    ceremonial: "Okwemikhosi",
    all: "Konke",
    healthy: "KUYAKHA",
    trendingTag: "OKUTRENDAYO",
    createRecipe: "Dala Iresiphi",
    aiGenerate: "Dala nge AI",
    scanIngredients: "Thatha Isithombe Sezithako",
    savedRecipes: "Amaresiphi Agciniweyo",
    searchSaved: "Dingisisa okugciniweyo",
    noSavedRecipes: "Akukho okugciniweyo",
    saveRecipesMessage: "Gcina amaresiphi owathandayo lapha!",
    browseRecipes: "Hlola Amaresiphi",
    shoppingList: "Uhlu Lokuthenga",
    clear: "Susa Konke",
    clearListConfirm: "Uqinisekile ufuna ukususa konke?",
    cancel: "Khansela",
    emptyList: "Uhlu lwakho alunalutho",
    emptyListMessage: "Faka izithako ezivela kumaresiphi ukuze uthenge.",
    pantryCheck: "Kukhonani ekhishini?",
    pantrySubtitle: "Khetha onakho, sizokupha amaresiphi.",
    skip: "Eqa okwamanje",
    showRecipes: "Tshengisa Amaresiphi",
    profile: "Iphrofayili",
    level: "Ileveli",
    saved: "Okugciniweyo",
    rank: "Isikhundla",
    badges: "Amabheji",
    achievements: "Okuziuziweyo",
    viewAll: "Bona Konke",
    ingredients: "Izithako",
    steps: "Izinyathelo",
    addToShoppingList: "Faka ohlwini lokuthenga",
    startCooking: "Qala Ukupheka",
    servings: "Abantu",
    time: "Isikhathi",
    reviews: "Ukubuyekezwa",
    calories: "Amakhalori",
    greeting: "Salibonani",
    subGreeting: "Siphekani namuhla?",
    featured: "Ukudla Kwesintu Okukhethiweyo",
    recipeOfTheDay: "Iresiphi Yanamuhla",
    searchPlaceholderHome: "Dingisisa Isitshwala, Amacimbi...",
    onboardingTitle: "Sitshele ngawe",
    onboardingSubtitle: "Sizokwenzela amaresiphi ahambelana lawe.",
    nameLabel: "Ibizo lakho ngubani?",
    namePlaceholder: "Bhala ibizo lakho",
    experienceLabel: "Ulwazi lokupheka",
    dietaryLabel: "Okuthandayo ukukudla",
    continue: "Qhubeka",
    beginner: "Umfundi",
    homeCook: "Umpheki waseKhaya",
    pro: "Ingcwethi",
    vegan: "Vegan",
    glutenFree: "Akulagolosi",
    halal: "Halal",
    none: "Lutho",
    settingsTitle: "Izilungiselelo",
    appPreferences: "Okuthandayo",
    darkMode: "Imodi Emnyama",
    notifications: "Izaziso",
    content: "Okulotshiweyo",
    language: "Ulimi",
    offlineData: "I-data ye-Offline",
    about: "Mayelana",
    version: "Inguqulo",
    terms: "Imigomo Yokusebenzisa",
    privacy: "Inqubomgomo Yobumfihlo",
    deleteAccount: "Susa I-akhawunti",
    account: "I-akhawunti",
    support: "Usizo",
    personalInfo: "Imininingwane Yakho",
    helpCenter: "Isikhungo Sosizo",
    rateUs: "Silinganise",
    logOut: "Phuma",
    createTitle: "Yabelana Iresiphi Yakho",
    home: "Ekhaya",
    explore: "Hlola",
    sortBy: "Hlela nga",
    cookingMode: "Imodi Yokupheka",
    saved: "Okugciniweyo",
    profile: "Iphrofayili",
    goBack: "Buyela Emuva",
    step: "Isinyathelo",
    of: "sama",
    mins: "imizuzu",
    chefsTip: "Ithiphu kaShefu",
    voiceCommands: "IMIYALELO YEZWI IYASEBENZA",
    finishCooking: "Qeda Ukupheka",
    nextStep: "Isinyathelo Esilandelayo",
    createSubtitle: "Hlanganyela umphakathi wabapheki baseZimbabwe",
    slogan: "Ukunambitheka Kwesintu, Ekhishini Yesimanje",
    addPhoto: "Faka Isithombe Sekhava",
    recipeTitle: "Isihloko seresiphi",
    recipeTitlePlaceholder: "isib. Isitshwala sikaGogo",
    prepTime: "Isikhathi sokulungiselela",
    prepTimePlaceholder: "isib. Imizuzu engu-30",
    servings: "Abantu",
    servingsPlaceholder: "isib. Abantu abangu-4",
    description: "Incazelo",
    descriptionPlaceholder: "Sitshele mayelana nokudla kwakho...",
    publish: "Shicilela Iresiphi",
    publishing: "Iyashicilelwa...",
    missingInfo: "Ulwazi Olungekho",
    missingInfoDesc: "Sicela ufake isihloko nencazelo.",
    success: "Impumelelo",
    recipeCreated: "Iresiphi yakho idaliwe futhi yagcinwa!",
    error: "Iphutha",
    createError: "Ihlulekile ukudala iresiphi. Hlola iSupabase.",
    ingredientsPlaceholder: "Okukodwa emgqeni (isib. 2 izinkomishi zefulawa)",
    stepsPlaceholder: "Okukodwa emgqeni (isib. Hlanganisa konke)",
    mealieMeal: "Impuphu",
    beef: "Inyama yenkomo",
    chicken: "Inkukhu",
    tomatoes: "Amatamatisi",
    onions: "Anyanisi",
    greens: "Imibhida",
    peanutButter: "Idobi",
    kapenta: "Ikapenta",
    beans: "Indumba",
    oil: "Amafutha",
    salt: "Isawudo",
    garlic: "Igalikhi",
    removePhoto: "Susa Isithombe",
    imageUploadHint: "Cindezela ukuze ufake isithombe",
    addIngredient: "Faka Isithako",
    addStep: "Faka Isinyathelo",
    validationError: "Iphutha",
    checkFields: "Hlola izindawo ezibhalwe ngokubomvu",
    imagePickerError: "Ihlulekile ukuthatha isithombe",
    required: "Kuyadingeka",
    invalidNumber: "Inombolo engavumelekile",
    atLeastOneIngredient: "Faka okungenani isithako esisodwa",
    atLeastOneStep: "Faka okungenani isinyathelo esisodwa",
  },
});

// Set the locale once at the beginning of your app.
const deviceLocale = getLocales()[0]?.languageCode ?? "en";
i18n.locale = deviceLocale;
i18n.enableFallback = true;
i18n.defaultLocale = "en";

// Monkey-patch i18n.t to log missing translations
const originalT = i18n.t;
i18n.t = function (scope, options) {
  // Check if translation exists in current locale (if not default)
  if (i18n.locale !== i18n.defaultLocale) {
    const parts = typeof scope === "string" ? scope.split(".") : [];
    let current: any = i18n.translations[i18n.locale];
    let exists = true;

    for (const part of parts) {
      if (current && typeof current === "object" && part in current) {
        current = current[part];
      } else {
        exists = false;
        break;
      }
    }

    if (!exists) {
      console.warn(
        `[MISSING TRANSLATION] Scope: "${scope}", Locale: "${i18n.locale}" (Falling back to default)`,
      );
    }
  }

  const result = originalT.call(i18n, scope, options);
  if (typeof result === "string" && result.startsWith('[missing "')) {
    console.warn(
      `[MISSING TRANSLATION] Scope: "${scope}", Locale: "${i18n.locale}"`,
    );
  }
  return result;
};

export default i18n;
